<tal:block tal:define="dummy python:request.set('disable_border', True)"/><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<body>

<metal:main fill-slot="main">
  <div tal:define="batch view/batch">
    <h1 class="documentFirstHeading">Shop Orders</h1>

    <tal:using_p4 tal:condition="not:view/using_plone5">
    <div>
         <table>
             <tbody>
                <tr>
                    <th class="datelabel">Start Date</th>
                    <th class="datelabel">End Date</th>
                </tr>
                <tr>
                    <form id="export_csv" name="export-csv" method="post"
                          tal:attributes="action string:${view/__name__}">
                    <td>
                        <tal:define define="show_hm python:False;
                                            show_ymd python:True;
                                            starting_year python:2016;
                                            ending_year python:None;
                                            future_years python:0;
                                            formname string:ShopOrders;
                                            inputvalue view/startDateString;
                                            inputname string:Start-Date">
                        <metal:box use-macro="here/calendar_macros/macros/calendarDatePickerBox|default">
                        </metal:box>
                        </tal:define>
                    </td>
                    <td>
                        <tal:define define="show_hm python:False;
                                            show_ymd python:True;
                                            starting_year python:2016;
                                            ending_year python:None;
                                            future_years python:0;
                                            formname string:ShopOrders;
                                            inputvalue view/endDateString;
                                            inputname string:End-Date">
                        <metal:box use-macro="here/calendar_macros/macros/calendarDatePickerBox|default">
                        </metal:box>
                        </tal:define>
                    </td>
                    <td>
                        <input type="submit" name="submitted" value="Update Selection">
                    </td>
                    </form>
                    <form id="export_csv2" name="export-csv2" method="post" class="allowMultiSubmit"
                          tal:attributes="action string:${context/absolute_url}/@@export_shop_orders_csv?first_order=${view/end_index}&last_order=${view/start_index}">
                        <td>
                            <input type="submit" name="export_csv" value="Export CSV">
                        </td>
                    </form>
                </tr>
             </tbody>
         </table>
    </div>

    <div>&nbsp;</div>
    <div>&nbsp;</div>

    <tal:batch tal:condition="not:view/batch">
            <h2>No orders found in date range selected.</h2>
    </tal:batch>
    </tal:using_p4>

    <table class="listing" tal:condition="view/batch">
      <thead>
        <tr>
            <tal:heading tal:repeat="key view/keys">
                <th tal:content="python:key.replace('_', ' ').title()">Heading</th>
            </tal:heading>
            <th>Order Details</th>
        </tr>
      </thead>
      <tbody>
          <tr tal:repeat="entry batch">
            <tal:value repeat="key view/keys">
                <td tal:content="structure python:entry.get(key, '')">Value</td>
            </tal:value>
            <td>
              <a tal:attributes="href string:@@jazkarta-shop-order-details?order_id=${entry/orderid}">Show Details</a>
          </tr>
      </tbody>
    </table>
    <tal:batchnavigation define="batchnavigation nocall:context/@@batchnavigation"
                         replace="structure python:batchnavigation(batch)" />
  </div>
</metal:main>
</body>
</html>
